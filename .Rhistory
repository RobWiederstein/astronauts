as.data.frame(flights)
flights <- str_split(df[1, 2], pattern = ", ")
flights
flights <- data.frame(flights)
as.data.frame(flights)
flights <- str_split(df[1, 2], pattern = ", ")
flights
data.frame(flights)
as.data.frame(flights)
flights <- unlist(str_split(df[1, 2], pattern = ", "))
flights
merge(df[1, ], flights)
merge(df[1, 1], flights)
df.00 <- tibble()
flights <- unlist(str_split(df[1, 2], pattern = ", "))
df.new <- merge(df[1, 1], flights)
df.00 <- cbind(df.00, df.new)
df.00 <- rbind(df.00, df.new)
View(df.00)
df <- tibble(astronaut = c("a", "b"),
flight = c("flight1, flight2", "flight2, flight3, flight4")
)
df.00 <- tibble()
for(i in 1:nrow(df)){
flights <- unlist(str_split(df[i, 2], pattern = ", "))
df.new <- merge(df[i, 1], flights)
df.00 <- rbind(df.00, df.new)
}
View(df.00)
df <- tibble(astronaut = c("a", "b", "c"),
flight = c("flight1, flight2", "flight2, flight3, flight4",
"flight1, flight6")
)
df.00 <- tibble()
for(i in 1:nrow(df)){
flights <- unlist(str_split(df[i, 2], pattern = ", "))
df.new <- merge(df[i, 1], flights)
df.00 <- rbind(df.00, df.new)
}
View(df.00)
list.files(path = "./", full.names = T)
file <- ".//International Astronaut Database.csv"
df <- data.table(fread(file = file))
View(df)
?data.table
?data.table::fread
df <- data.table(fread(file = file, quote = ""))
df <- data.table(fread(file = file, quote = "\"))
df <- data.table(fread(file = file, quote = "\""))
df <- data.table(fread(file = file)
file <- ".//International Astronaut Database.csv"
df <- data.table(fread(file = file)
df <- data.table(fread(file = file))
df <- data.table(fread(file = file))
View(df)
for(i in 1:nrow(df)){
flights <- unlist(str_split(df[i, 4], pattern = ", "))
df.new <- merge(df[i, 1], flights)
df.00 <- rbind(df.00, df.new)
}
for(i in 1:nrow(df)){
flights <- unlist(str_split(df[i, 4], pattern = ", "))
df.new <- merge(df[i, 1], flights, by = "Name")
df.00 <- rbind(df.00, df.new)
}
flights <- unlist(str_split(df[1, 4], pattern = ", "))
flights
df[1, 1]
df <- read.csv(file = file)
df <- read.csv(file = file, stringsAsFactors = F)
df.00 <- tibble()
df.00 <- tibble()
for(i in 1:nrow(df)){
flights <- unlist(str_split(df[, 4], pattern = ", "))
df.new <- merge(df[i, 1], flights, by = "Name")
df.00 <- rbind(df.00, df.new)
}
df.00 <- data.frame()
for(i in 1:nrow(df)){
flights <- unlist(str_split(df[, 4], pattern = ", "))
df.new <- merge(df[i, 1], flights, by = "Name")
df.00 <- rbind(df.00, df.new)
}
for(i in 1:nrow(df)){
flights <- unlist(str_split(df[i, 4], pattern = ", "))
df.new <- merge(df[i, 1], flights, by = "Name")
df.00 <- rbind(df.00, df.new)
}
flights <- unlist(str_split(df[1, 4], pattern = ", "))
flights
df.new <- merge(df[1, 1], flights)
df.00 <- rbind(df.00, df.new)
df.00
file <- ".//International Astronaut Database.csv"
df <- read.csv(file = file, stringsAsFactors = F)
df.00 <- data.frame()
flights <- unlist(str_split(df[1, 4], pattern = ", "))
df.new <- merge(df[1, 1], flights)
df.00 <- rbind(df.00, df.new)
df.00
file <- ".//International Astronaut Database.csv"
df <- read.csv(file = file, stringsAsFactors = F)
df.00 <- data.frame()
for(i in 1:nrow(df)){
flights <- unlist(str_split(df[i, 4], pattern = ", "))
df.new <- merge(df[i, 1], flights)
df.00 <- rbind(df.00, df.new)
}
View(df.00)
table(df.00$y)
sort(table(df.00$y))
colnames(df) <- tolower(colnames(df))
#split flight column by separate flights
df.00 <- data.frame()
for(i in 1:nrow(df)){
flights <- unlist(str_split(df[i, 4], pattern = ", "))
df.new <- merge(df[i, 1], flights)
df.00 <- rbind(df.00, df.new)
}
#split flight column by separate flights
df.00 <- data.frame(stringsAsFactors = F)
for(i in 1:nrow(df)){
flights <- unlist(str_split(df[i, 4], pattern = ", "))
df.new <- merge(df[i, 1], flights)
df.00 <- rbind(df.00, df.new)
}
#split flight column by separate flights
df.00 <- data.frame(stringsAsFactors = F)
for(i in 1:nrow(df)){
flights <- unlist(str_split(df[i, 4], pattern = ", "))
df.new <- merge(df[i, 1], flights)
df.00 <- data.frame(rbind(df.00, df.new), stringsAsFactors = F)
}
names(df.00) <- c("name", "flights")
levels(df.00$name)
df.00$name <- as.character(levels(df.00$name))
table(df$country)
file <- ".//International Astronaut Database.csv"
df <- read.csv(file = file, stringsAsFactors = F)
colnames(df) <- tolower(colnames(df))
#split flight column by separate flights
df.00 <- data.frame()
for(i in 1:nrow(df)){
flights <- unlist(str_split(df[i, 4], pattern = ", "))
df.new <- merge(df[i, 1], flights)
df.00 <- rbind(df.00, df.new)
}
?rbind
#split flight column by separate flights
df.00 <- data.frame()
for(i in 1:nrow(df)){
flights <- unlist(str_split(df[i, 4], pattern = ", "))
df.new <- merge(df[i, 1], flights)
df.00 <- dplyr::bind_rows(df.00, df.new)
}
for(i in 1:nrow(df)){
flights <- unlist(str_split(df[i, 4], pattern = ", "))
df.new <- dplyr::left_join(df[i, 1], flights)
df.00 <- dplyr::bind_rows(df.00, df.new)
}
for(i in 1:nrow(df)){
flights <- unlist(str_split(df[i, 4], pattern = ", "))
df.new <- merge(df[i, 1], flights)
df.00 <- dplyr::bind_rows(df.00, df.new)
}
?factor
df.00$name <- as.character(levels(df.00$name)[df.00$name])
df.00$name <- as.character(df.00$name)
#split flight column by separate flights
df.00 <- data.frame()
for(i in 1:nrow(df)){
flights <- unlist(str_split(df[i, 4], pattern = ", "))
df.new <- merge(df[i, 1], flights)
df.00 <- dplyr::bind_rows(df.00, df.new)
}
names(df.00) <- c("name", "flights")
View(df.00)
as.character(df.00$flights)[1:5]
df.00$name <- as.character(df.00$name)
df.00$flights <- as.character(df.00$flights)
View(df.00)
#merge back
df <- merge(df.00, df[, c(1:3, 4,5)])
#merge back
df <- merge(df.00, df[, c(1:3, 4,5)], drop = F)
file <- ".//International Astronaut Database.csv"
df <- read.csv(file = file, stringsAsFactors = F)
colnames(df) <- tolower(colnames(df))
#split flight column by separate flights
df.00 <- data.frame()
for(i in 1:nrow(df)){
flights <- unlist(str_split(df[i, 4], pattern = ", "))
df.new <- merge(df[i, 1], flights)
df.00 <- dplyr::bind_rows(df.00, df.new)
}
names(df.00) <- c("name", "flights")
df.00$name <- as.character(df.00$name)
df.00$flights <- as.character(df.00$flights)
#merge back
df <- merge(df.00, df[, c(1:3, 4,5)], drop = F)
View(df)
file <- ".//International Astronaut Database.csv"
df <- read.csv(file = file, stringsAsFactors = F)
colnames(df) <- tolower(colnames(df))
#split flight column by separate flights
df.00 <- data.frame()
for(i in 1:nrow(df)){
flights <- unlist(str_split(df[i, 4], pattern = ", "))
df.new <- merge(df[i, 1], flights)
df.00 <- dplyr::bind_rows(df.00, df.new)
}
names(df.00) <- c("name", "flights")
df.00$name <- as.character(df.00$name)
df.00$flights <- as.character(df.00$flights)
#merge back
df.01 <- merge(df.00, df[, c(1:3, 4,5)], drop = F)
head(df.00)
head(df)
head(df.01)
#merge back
df.01 <- merge(df.00, df[, c(1:3, 5, 6)], drop = F)
View(df.01)
sort(table(name))
sort(table(df.01$name))
rev(sort(table(df.01$name)))
rev(sort(table(df.01$name)))[1:10]
igraphdata::data(list = )
?igraphdata
data(package="igraphdata")
lesmiserable
?lesmiserable
?igraph
igraph::lesmis
data(lesmis)
igraph::data(lesmis)
plot(lesmis,vertex.size=0)
data(les_miserables)
library(igraph)
data(les_miserables)
df <- tibble(astronaut = as.character(c(a, a, b, c)))
df <- tibble(astronaut = c("a", "a", "b", "c"))
df <- tibble(astronaut = c("a", "a", "b", "c"),
flights = c("flight1", "flight2", "flight2", "flight1" ))
df
df %>% group_by(flights)
df <- tibble(astronaut = c("a", "a", "b", "c"),
flights = c("flight1", "flight2", "flight2", "flight3" ))
df %>% group_by(flights)
df <- tibble(source = c("a", "a", "b", "c"),
destin = c("a", "a", "b", "c"))
df <- tibble(astronaut = c("a", "a", "b", "c"),
flights = c("flight1", "flight2", "flight2", "flight3" ))
df %>% group_by(flights)
df1 <- tibble(source = c("a", "a", "b", "c"),
destin = c("a", "a", "b", "c"))
df1
df <- tibble(astronaut = c("a", "a", "b", "c"),
flights = c("flight1", "flight2", "flight2", "flight3" ),
n = 1)
df %>% group_by(flights) %>% summarize(tot = sum(n))
df %>% group_by(flights) %>% mutate(tot = sum(n))
df %>% group_by(flights)
df %>% group_by(flights) %>% mutate(tot = sum(n))
df %>% group_by(flights) %>% mutate(tot = sum(n)) %>% filter(tot > 1)
df %>% group_by(flights) %>% mutate(tot = sum(n)) %>% dplyr::filter(tot > 1)
?tidyr
?tidyr::pivot_wider
df %>% group_by(flights) %>%
mutate(tot = sum(n)) %>%
dplyr::filter(tot > 1) %>%
tidyr::spread(astronaut)
library(tidyr)
df %>% group_by(flights) %>%
mutate(tot = sum(n)) %>%
dplyr::filter(tot > 1) %>%
tidyr::spread(astronaut)
df %>% group_by(flights) %>%
mutate(tot = sum(n)) %>%
dplyr::filter(tot > 1) #%>%
?spread
# Spread and gather are complements
df <- data.frame(x = c("a", "b"), y = c(3, 4), z = c(5, 6))
df %>% spread(x, y) %>% gather("x", "y", a:b, na.rm = TRUE)
View(df)
df %>% spread(x, y) #%>% gather("x", "y", a:b, na.rm = TRUE)
df <- tibble(astronaut = c("a", "a", "b", "c"),
flights = c("flight1", "flight2", "flight2", "flight3" ),
n = 1)
df %>% group_by(flights) %>%
mutate(tot = sum(n)) %>%
dplyr::filter(tot > 1) #%>%
df %>% group_by(flights) %>%
mutate(tot = sum(n)) %>%
dplyr::filter(tot > 1) %>%
tidyr::spread(astronaut, flights)
df %>% group_by(flights) %>%
mutate(tot = sum(n)) %>%
dplyr::filter(tot > 1) %>%
tidyr::spread(flights, astronaut)
df %>% group_by(flights) %>%
mutate(tot = sum(n)) %>%
dplyr::filter(tot > 1) %>%
ungroup() %>%
tidyr::spread(flights, astronaut)
df %>% group_by(flights) %>%
mutate(tot = sum(n)) %>%
dplyr::filter(tot > 1) %>%
ungroup()
df.1 <- df %>%
group_by(flights) %>%
mutate(tot = sum(n)) %>%
dplyr::filter(tot > 1) %>%
ungroup()
spread(df.1, flight, astronaut)
spread(df.1, flights, astronaut)
rlang::last_error()
rlang::last_trace()
spread(df.1, astronaut, flights)
View(df.1)
source('~/.active-rstudio-document')
View(df.01)
View(df.01)
dplyr::filter(df.01, name == "Michael Foale")
dplyr::filter(df.01, flights == "STS-103 (1999)")
dput(session location sequence weight INDIVIDUAL action
a1      texas    1        10       john       Z1
a1      texas    2        5        peter      Z2
a1      texas    3        3        ben        Z1
a1      texas    4        5        peter      Z5
a2      calif    1        25       esther     Z3
a2      calif    2        5        peggy      Z2
a2      calif    3        10       greg       Z5)
?read.txt
file <- "./so_question.txt"
scan(file = file)
readLines(file = file)
?readLines
con <- "./so_question.txt"
readLines(con = con)
a <- readLines(con = con)
a[1]
str_split(a)
str_split(a, pattern = " ")
str_split(a, pattern = "\\s")
str_split(a, pattern = "\\s+")
readLines(con = con) %>%
str_split(a, pattern = "\\s+")
readLines(con = con) %>%
str_split(pattern = "\\s+")
readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
data.frame(stringsAsFactors = F)
readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
do.call(rbind())
readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
rbind(do.call())
readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
tibble()
readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
con <- "./so_question.txt"
readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
library(magrittr)
readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
readLines(con = con) %>%
str_split(pattern = "\\s+") #%>%
readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
tibble()
readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
unlist()
readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
unlist() %>%
matrix(ncol = 6)
readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
unlist() %>%
matrix(ncol = 6, byrow = T)
con <- "./so_question.txt"
df <- readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
unlist() %>%
matrix(ncol = 6, byrow = T)
df <- readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
unlist() %>%
matrix(ncol = 6, byrow = T) %>%
tibble()
df <- readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
unlist() %>%
matrix(ncol = 6, byrow = T) %>%
dataframe()
df <- readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
unlist() %>%
matrix(ncol = 6, byrow = T) %>%
data.frame()
df <- readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
unlist() %>%
matrix(ncol = 6, byrow = T) %>%
as_tibble()
?as.tibble
df <- readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
unlist() %>%
matrix(ncol = 6, byrow = T) %>%
as_tibble(header = T)
con <- "./so_question.txt"
df <- readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
unlist() %>%
matrix(ncol = 6, byrow = T) %>%
as_tibble(header = T)
df <- readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
unlist() %>%
matrix(ncol = 6, byrow = T) %>%
as.data.frame(header = T)
df <- readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
unlist() %>%
matrix(ncol = 6, byrow = T) %>%
as_tibble(header = T)
df <- readLines(con = con) %>%
str_split(pattern = "\\s+") %>%
unlist() %>%
matrix(ncol = 6, byrow = T) %>%
as_tibble()
colnames(df)
colnames(df) <- df[1, ]
df <- df[-1, ]
View(df)
df %>% select(session, weight, sequence, INDIVIDUAL) %>%
inner_join(., select(., session, INDIVIDUAL), by = "session") %>%
rename(INDIVIDUAL1 = INDIVIDUAL.x, INDIVIDUAL2 = INDIVIDUAL.y) %>%
filter(INDIVIDUAL1 != INDIVIDUAL2) %>%
unique %>%
arrange(session, sequence)
df %>% select(session, weight, sequence, INDIVIDUAL) #%>%
df %>% select(session, weight, sequence, INDIVIDUAL) %>%
inner_join(., select(., session, INDIVIDUAL), by = "session") #%>%
df %>% select(session, weight, sequence, INDIVIDUAL) %>%
inner_join(., select(., session, INDIVIDUAL), by = "session") %>%
rename(INDIVIDUAL1 = INDIVIDUAL.x, INDIVIDUAL2 = INDIVIDUAL.y) #%>%
df %>% select(session, weight, sequence, INDIVIDUAL) %>%
inner_join(., select(., session, INDIVIDUAL), by = "session") %>%
rename(INDIVIDUAL1 = INDIVIDUAL.x, INDIVIDUAL2 = INDIVIDUAL.y) %>%
filter(INDIVIDUAL1 != INDIVIDUAL2) %>%
unique %>%
arrange(session, sequence)
df %>% select(session, weight, sequence, INDIVIDUAL) %>%
inner_join(., select(., session, INDIVIDUAL), by = "session") %>%
rename(INDIVIDUAL1 = INDIVIDUAL.x, INDIVIDUAL2 = INDIVIDUAL.y) %>%
dplyr::filter(INDIVIDUAL1 != INDIVIDUAL2) %>%
unique %>%
arrange(session, sequence)
df <- tibble(astronaut = c("a", "a", "b", "c"),
flights = c("flight1", "flight2", "flight2", "flight3" ),
n = 1)
View(df)
df %>%  inner_join(., select(., flights, astronaut), by = "flights") #%>%
df <- tibble(astronaut = c("a", "a", "b", "c"),
flights = c("flight1", "flight2", "flight2", "flight3" )
)
df %>%  inner_join(., select(., flights, astronaut), by = "flights") #%>%
df %>%  inner_join(., select(., flights, astronaut), by = "flights") %>%
rename(astronaut1 = astronaut.x, astronaut2 = astronaut.y) #%>%
df %>%  inner_join(., select(., flights, astronaut), by = "flights") %>%
rename(astronaut1 = astronaut.x, astronaut2 = astronaut.y) %>%
dplyr::filter(astronaut1 != astronaut2) %>%
unique %>%
arrange(flights)
df <- tibble(astronaut = c("a", "a", "b", "c"),
flights = c("flight1", "flight2", "flight2", "flight3" ),
n = 1)
df %>%  inner_join(., select(., flights, astronaut), by = "flights") %>%
rename(astronaut1 = astronaut.x, astronaut2 = astronaut.y) %>%
dplyr::filter(astronaut1 != astronaut2) %>%
unique %>%
arrange(flights)
View(df)
df <- tibble(astronaut = c("a", "a", "b", "c", "d", "d", "d", "d"),
flights = c("flight1", "flight2", "flight2", "flight3",
"flight2", "flight3", "flight4", "flight5"),
n = 1)
df %>%  inner_join(., select(., flights, astronaut), by = "flights") %>%
rename(astronaut1 = astronaut.x, astronaut2 = astronaut.y) %>%
dplyr::filter(astronaut1 != astronaut2) %>%
unique %>%
arrange(flights)
df %>%  inner_join(., select(., flights, astronaut), by = "flights") %>%
rename(astronaut1 = astronaut.x, astronaut2 = astronaut.y) %>%
dplyr::filter(astronaut1 != astronaut2) %>%
unique %>%
select(astronaut1, astronaut2, flights, n) %>%
arrange(flights)
df.1 <- df %>%
inner_join(., select(., flights, astronaut), by = "flights") %>%
rename(astronaut1 = astronaut.x, astronaut2 = astronaut.y) %>%
dplyr::filter(astronaut1 != astronaut2) %>%
unique %>%
select(astronaut1, astronaut2, flights, n) %>%
arrange(flights)
